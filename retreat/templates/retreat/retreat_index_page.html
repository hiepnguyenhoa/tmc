{% extends "base.html" %}
{% load wagtailcore_tags %}

{% block content %}
<div class="retreat-index-page">
    <!-- Page Title -->
    <div class="page-title">
        <h1>{{ page.title }}</h1>
        {% if page.intro %}
        <p class="intro">{{ page.intro|safe }}</p>
        {% endif %}
    </div>

    <!-- Retreat Categories and Options -->
    {% if page.grouped_available_retreats %}
        {% for category, retreats in page.grouped_available_retreats.items %}
        <div class="retreat-category">
            <h3 class="category-name">{{ category }}</h3>
            <ul class="retreat-list">
                {% for retreat in retreats %}
                <li class="retreat-item">
                    <a href="{{ retreat.page.url }}">
                        {{ retreat.available_retreat.start_date }} - {{ retreat.available_retreat.end_date }}
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endfor %}
    {% else %}
        <p>No available retreats found.</p>
    {% endif %}
</div>
{% endblock %}